"use strict";!function(m){var t,e,i,a,o;t=document,e="script",i="facebook-jssdk",o=t.getElementsByTagName(e)[0],t.getElementById(i)||((a=t.createElement(e)).id=i,a.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v3.2",o.parentNode.insertBefore(a,o));var r,n,l=[m(".menu-toggle"),m("#navMenu"),m(".menu-open-background"),m(".header-logo"),m(".body-layout")];if(m(".menu-toggle").on("click",function(){m.each(l,function(t,e){e.toggleClass("active")})}),m(".menu-open-background").on("click singleTap",function(){m.each(l,function(t,e){e.removeClass("active")})}),0<m("#anchorArticle").length&&m(".breadCrumb").addClass("push"),r=function(t){"up"===t?(m("#anchorArticle").addClass("show"),m(".shareBox").addClass("show"),m("#gotop").fadeIn(),0<m("#anchorArticle").length&&m(".breadCrumb").addClass("push")):(m("#anchorArticle").removeClass("show"),m(".shareBox").removeClass("show"),m("#gotop").fadeOut(),0<m("#anchorArticle").length&&m(".breadCrumb").removeClass("push")),0===m(".body-layout").scrollTop()?m("#anchorArticle").addClass("show top"):m("#anchorArticle").removeClass("top")},n=document.querySelector(".body-layout").scrollTop,r=r||function(){},document.querySelector(".body-layout").addEventListener("scroll",function(){var t=document.querySelector(".body-layout").scrollTop,e=t-n;if(0===e)return!1;r(0<e?"down":"up"),n=t},!1),m("#gotop").click(function(){return m(".body-layout").animate({scrollTop:0},"slow"),!1}),0<m("#slider-banner").length&&m("#slider-banner>.owl-carousel").owlCarousel({loop:!0,items:1,autoHeight:!0,navText:["<div class='icon-cc-lnr-chevron-left'></div>","<div class='icon-cc-lnr-chevron-right'></div>"],responsive:{0:{nav:!0},580:{nav:!0}}}),0<m("#sliderPeople").length){var s=m("#sliderPeople>.owl-carousel").find(".item").length,c=5<s;m(window).width()<1e3&&800<m(window).width()?c=4<s:m(window).width()<800&&580<m(window).width()?c=3<s:m(window).width()<580&&(c=2<s),m("#sliderPeople>.owl-carousel").owlCarousel({loop:c,items:5,margin:3,dots:!1,responsive:{0:{items:2,stagePadding:20,loop:c},580:{items:3,stagePadding:20,loop:c},800:{items:4,stagePadding:20,loop:c},1e3:{items:5}}})}if(0<m("#sliderArticle").length){var d=m("#sliderArticle>.owl-carousel").find(".item").length,h=4<d;m(window).width()<1e3&&800<m(window).width()?h=3<d:m(window).width()<800&&580<m(window).width()?h=2<d:m(window).width()<580&&(h=1<d),m("#sliderArticle>.owl-carousel").owlCarousel({loop:h,items:4,margin:20,dots:!1,navText:["<div class='icon-cc-lnr-chevron-left'></div>","<div class='icon-cc-lnr-chevron-right'></div>"],responsive:{0:{items:1,nav:!0,loop:h},580:{items:2,nav:!0,margin:15,loop:h},800:{items:3,nav:!0,margin:30,loop:h},1e3:{items:4,loop:h}}})}m(".shareBtn").on("click",function(){m(this).next(".shareList").toggleClass("open")});m("#advertising-height"),m("#articleH").height();function u(e,t){!function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}()?(e.on("mouseenter",function(){m(this).parents(".article-categories-menu").addClass("open")}),t.mouseleave(function(){m(this).parents(".more").on("mouseleave",function(){m(this).parents(".article-categories-menu").removeClass("open")})})):(e.on("click",function(){m(this).parents(".article-categories-menu").toggleClass("open")}),m(document).on("click",function(t){0==m(t.target).closest(".more>a").length&&0==m(t.target).closest(".sub-menu").length&&e.parents(".article-categories-menu").removeClass("open")}))}var f={link:[],text:[],width:[]},g=m(".article-categories li.more").innerWidth(),p=m(".article-categories").html(),v=0;function w(){var t=m(".article-categories").outerWidth(),e=t-g-15;m(window).width()<590&&(e=t-15),m(".article-categories li").remove(),m(".article-categories-more li").remove(),m(".article-categories").append(p),u(m(".article-categories").find(".more>a"),m(".article-categories").find(".sub-menu"));for(var i=v=0;i<f.text.length;i++){v+=f.width[i];var a="<li><a class='tag_log' href='"+f.link[i]+"'>"+f.text[i]+"</a></li>";e<v?(m(".article-categories").find(".more").show(),m(".article-categories-more").append(a)):m(".article-categories").find(".more").hide()}for(var o=m(".article-categories-more li").length,r=0;r<o;r++)m(".article-categories > li").not(".more").last().remove()}function b(t,n){var o=[],l=0,s=!0;t.each(function(){var t=m(this).find(".maxTextQty").height()/parseInt(m(this).find(".maxTextQty").css("lineHeight")),e=m(this).find(".maxTextQty").text().match(/[\s\S]{1}/g);if(null!=e&&null!=e){var i=n*Math.ceil(e.length/t)-(1+2*(n-1))-1;o.push(i);var a=o.reduce(function(t,e){return parseInt(t)+parseInt(e)},0)/o.length;l=parseInt(a)}}),t.each(function(){var t=m(this).find(".maxTextQty").height(),e=parseInt(m(this).find(".maxTextQty").css("lineHeight")),i=m(this).find(".maxTextQty").text(),a=i.match(/[\s\S]{1}/g);if(s=!(t<=e*n/2),null!=a&&null!=a&&a.length>n){var o=i.slice(0,l),r=o.match(/[\x00-\xff]/g);null!=r&&null!=r&&(5<r.length&&(o=i.slice(0,l+parseInt(r.length/2-2))),5<r.length&&e*n/2<=t&&n<=2.2&&(s=!1)),a.length>l?m(this).find(".maxTextQty").text(o+"..."):m(this).find(".maxTextQty"),s?m(this).find(".triangleBox").css({height:e*Math.round(n),width:e*Math.round(n)/2}):m(this).find(".triangleBox").css("display","none")}})}m(".article-categories li").not(".more").each(function(t){var e=m(this).outerWidth(),i=m(this).text(),a=m(this).find("a").attr("href");f.link.push(a),f.text.push(i),f.width.push(e)}),w(),window.addEventListener("resize",function(){var t=void 0;window.clearTimeout(t),t=window.setTimeout(function(){w()},100)}),b(m(".triangleMaxText.Qty3"),2.2),b(m(".triangleMaxText.Qty2"),1.9),b(m(".triangleMaxText.Qty4"),2.9);var x=m(".fixed-box");var y=m(window).height(),C=m(".adshow");if(m(".body-layout").css("height",y),m("body").css("height",y),1<=C.length){m(".ad-box").css("height",y-44.5),m(".ad-info").css("padding-top",y-44.5),C.css("height",y-44.5);var T=void 0;m(".body-layout").scroll(function(){clearTimeout(T),T=setTimeout(function(){var t=C.offset().top;m(".body-layout").width()<420&&(t<0+y&&-y<t?m(".ad-box").css("cssText","display: block !important;"):m(".ad-box").css("cssText","display: none !important;"))})})}if(1<=m("#secondArticle").length){var A=m("#anchorArticle-owl");m(document).ready(function(){var a=m("#secondArticle").offset().top,o=m("#thirdArticle").offset().top,r=m(".wrapper-pageArticle").height();A.owlCarousel({loop:!0,items:3,margin:10,dots:!1,navText:["<div class='icon-cc-lnr-chevron-left'></div>","<div class='icon-cc-lnr-chevron-right'></div>"],responsive:{0:{items:1},580:{items:2},800:{items:3}}}).on("dragged.owl.carousel",function(t){var e=t.item.index-2,i=t.page.size;3==i?1==e||4==e?m(".body-layout").animate({scrollTop:0},"slow"):2==e?m(".body-layout").animate({scrollTop:a+345},"slow"):3==e&&m(".body-layout").animate({scrollTop:o+690},"slow"):2==i&&(3==e?m(".body-layout").animate({scrollTop:0},"slow"):1==e?m(".body-layout").animate({scrollTop:a+r},"slow"):2==e&&m(".body-layout").animate({scrollTop:o+r},"slow"))})})}1<=m("#firstArticle").length&&m(document).ready(function(){var i=m("#secondArticle").offset().top,a=m("#thirdArticle").offset().top,l=m(".wrapper-pageArticle").height(),s=m("#firstArticle"),c=m("#secondArticle"),d=m("#thirdArticle"),h=(l=m(".wrapper-pageArticle").height(),""),u="",f="";m(".body-layout").scroll(function(){var t=s.offset().top,e=c.offset().top,i=d.offset().top,a=location.pathname,o=t<=0+l&&0+l+200<e,r=e<=0+l&&0+l+200<i,n=i<=0+l;m("#anchorArticle-owl").find(".anchor").each(function(){if("#firstArticle"==m(this).data("anchor")){var t=m(this).attr("href"),e=m(this).find(".card-text").text(),i=m(this).data("tag");return h={Url:t,Title:e+" | 運動星球 sportsplanetmag",tag:i,breadCrumb:e}}if("#secondArticle"==m(this).data("anchor")){var a=m(this).attr("href"),o=m(this).find(".card-text").text(),r=m(this).data("tag");return u={Url:a,Title:o+" | 運動星球 sportsplanetmag",tag:r,breadCrumb:o}}if("#thirdArticle"==m(this).data("anchor")){var n=m(this).attr("href"),l=m(this).find(".card-text").text(),s=m(this).data("tag");return f={Url:n,Title:l+" | 運動星球 sportsplanetmag",tag:s,breadCrumb:l}}}),o?(m("#anchorArticle-owl").find(".anchor").each(function(){"#firstArticle"==m(this).data("anchor")?(m(this).addClass("active"),A.trigger("to.owl.carousel",[0])):m(this).removeClass("active")}),a!==h.Url&&(window.history.pushState(null,null,h.Url),m(document).attr("title",h.Title),m(".breadCrumb").find("li").last().prev().find("a").text(h.tag),m(".breadCrumb").find("li").last().find("a").text(h.breadCrumb))):r?(m("#anchorArticle-owl").find(".anchor").each(function(){"#secondArticle"==m(this).data("anchor")?(m(this).addClass("active"),A.trigger("to.owl.carousel",[1])):m(this).removeClass("active")}),a!==u.Url&&(window.history.pushState(null,null,u.Url),m(document).attr("title",u.Title),m(".breadCrumb").find("li").last().prev().find("a").text(u.tag),m(".breadCrumb").find("li").last().find("a").text(u.breadCrumb))):n&&(m("#anchorArticle-owl").find(".anchor").each(function(){"#thirdArticle"==m(this).data("anchor")?(m(this).addClass("active"),A.trigger("to.owl.carousel",[2])):m(this).removeClass("active")}),a!==f.Url&&(window.history.pushState(null,null,f.Url),m(document).attr("title",f.Title),m(".breadCrumb").find("li").last().prev().find("a").text(f.tag),m(".breadCrumb").find("li").last().find("a").text(f.breadCrumb)))}),window.onpopstate=function(){var t=location.pathname;t==h.Url?(m(".breadCrumb").find("li").last().prev().find("a").text(h.tag),m(".breadCrumb").find("li").last().find("a").text(h.breadCrumb)):t==u.Url?(m(".breadCrumb").find("li").last().prev().find("a").text(u.tag),m(".breadCrumb").find("li").last().find("a").text(u.breadCrumb)):t==f.Url&&(m(".breadCrumb").find("li").last().prev().find("a").text(f.tag),m(".breadCrumb").find("li").last().find("a").text(f.breadCrumb))},m(window).on("popstate",function(t){var e=location.pathname;h.Url==e?m(".body-layout").scrollTop(0):u.Url==e?m(".body-layout").scrollTop(i+345):f.Url==e&&m(".body-layout").scrollTop(a+690)})});var k=void 0;m(".body-layout").scroll(function(){clearTimeout(k),k=setTimeout(function(){!function(){400<m(this).scrollTop()?m(".breadcrumbs").addClass("up"):m(".breadcrumbs").removeClass("up")}()},100),function(){if(0<x.length)for(var t=1;t<=x.length;t++){var e=".article"+t,i=m(e).find(".fixed-box"),a=m(e).find(".article-left").offset().top,o=i.outerHeight(),r=m(e).find(".article-left").width(),n=m(e).find(".article-left").outerHeight();i.css("max-width",r),a<=213?i.addClass("up"):i.removeClass("up"),a<=o-n+50+96+67?(i.addClass("end"),i.removeClass("up")):i.removeClass("end")}}()})}(jQuery);